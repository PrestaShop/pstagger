/*
* jQuery Prestagify plugin
* https://www.prestashop.com
*
* Copyright PrestaShop and other contributors
* Released under the MIT license
* https://tldrlegal.com/license/mit-license
*
* Date: 2016-01-13
*/

(function(c){var b=null,g=[],d=null,k={wrapperClassAdditional:"",tagsWrapperClassAdditional:"",tagClassAdditional:"",closingCrossClassAdditionnal:"",tagInputWrapperClassAdditional:"",tagInputClassAdditional:"",delimiter:" ",inputPlaceholder:"Add tag ...",closingCross:!0,context:null,clearAllBtn:!1,clearAllIconClassAdditional:"",clearAllSpanClassAdditional:"",onTagsChanged:null,onResetTags:null},l=function(){d.keypress(function(a){13==a.keyCode&&(g=[],h())});d.focusout(function(a){if(c(".prestagifyResetTagsBtn:hover").length)return!1;
d.val().length&&(g=[],h())})},h=function(){var a=d.val(),e=a.split(b.delimiter);if(a.length){for(var f in e)a=e[f],""!==a&&g.push(a);e="";for(f in g)a='<span class="prestagifyTag '+b.tagClassAdditional+'"><span>'+g[f]+"</span>",!0===b.closingCross&&(a+='<a class="prestagifyClosingCross '+b.closingCrossClassAdditionnal+'" href="#">x</a>'),a+="</span>",e+=a;c(".prestagifyTagsWrapper").empty().prepend(e).css("display","block");c(".prestagifyAddTagWrapper").css("display","none")}else c(".prestagifyTagsWrapper").css("display",
"none"),c(".prestagifyAddTagWrapper").css("display","block"),d.focus();null!==b.onTagsChanged&&b.onTagsChanged.call(b.context,g)},m=function(){c(".prestagifyTagsWrapper").on("click",function(a){a=a.target.className.match(RegExp("prestagifyClosingCross","g"));c(".prestagifyAddTagWrapper").is(":hidden")&&null===a&&(c(".prestagifyTagsWrapper").css("display","none"),c(".prestagifyAddTagWrapper").css("display","block"),d.focus())})},n=function(){c(document).delegate(".prestagifyResetTagsBtn","click",function(){g=
[];d.val("");c(".prestagifyTagsWrapper").css("display","none");c(".prestagifyAddTagWrapper").css("display","block");d.focus();c(".prestagifyTag").remove();null!==b.onResetTags&&b.onResetTags.call(b.context)})},q=function(){c(document).delegate(".prestagifyClosingCross","click",function(a){a=c(this).parent();var b=a.index(),b=p(b);d.val(b);a.remove();g=[];h()})},p=function(a){var b="";c(".prestagifyTag").each(function(d,g){if(a==c(this).index())return!0;b+=" "+c(this).children().first().text()});return b};
c.fn.Prestagify=function(a){var e={},f;for(f in k)a.hasOwnProperty(f)?e[f]=a[f]:e[f]=k[f];e.originalInput=this;b=e;b.originalInput.css("display","none");a="";!0===b.clearAllBtn&&(a+='<span class="prestagifyResetTagsBtn '+b.clearAllSpanClassAdditional+'"><i class=" '+b.clearAllIconClassAdditional+'"></i></span>',n());b.originalInput.after('<div class="prestagifyWrapper '+b.wrapperClassAdditional+'">'+a+'<div class="prestagifyTagsWrapper '+b.tagsWrapperClassAdditional+'"></div><div class="prestagifyAddTagWrapper '+
b.tagInputWrapperClassAdditional+'"><input class="prestagifyAddTagInput '+b.tagInputClassAdditional+'"></div></div>');d=c(".prestagifyAddTagInput");d.attr("placeholder",b.inputPlaceholder);l();m();q();return this}})(jQuery);
